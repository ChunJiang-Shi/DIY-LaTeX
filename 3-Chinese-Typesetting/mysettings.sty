\ProvidesPackage{mysettings}

% Packages loading
\usepackage{booktabs} % Providing \top/mid/bottom-rule
\usepackage{hologo}   % Providing Xe/Lua-LaTeX logos
\usepackage{listings}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\usepackage{tcolorbox}
\usepackage[backend=biber,]{biblatex}
\usepackage[colorlinks,runcolor=green!50!black,citecolor=cyan!75!black,urlcolor=blue]{hyperref}

% tcb settings
\tcbuselibrary{listings,skins,theorems,xparse}

% Default lst loading languages
\lstloadlanguages{tex,bash}

% Bibliography file
\addbibresource{Sections/ref.bib}

% Math definitions
% Following https://tex.stackexchange.com/a/86498
\newcommand{\iu}{{\mathrm{i}\mkern1mu}}
\newcommand{\e}{\mathrm{e}}

% Code listing definitions using lstlisting and lstinputlisting
\newcommand{\inputlst}[3][]{
  \lstinputlisting[
    #2,
    numberstyle=\scriptsize,
    frame=TB,
    xleftmargin=1.5cm,
    xrightmargin=1.5cm,
    rulesep=.7pt,
    rulesepcolor=\color{\framecolor},
    backgroundcolor=\color{bgcolor},
    breaklines,
    breakautoindent=true,
    basicstyle=\small\ttfamily,
    commentstyle=\small,
    #1,
  ]{#3}
}

\newcommand{\texinputlst}[2][]{
  \inputlst[caption=\href{run:#2}{#2},#1]{language=tex,numbers=left}{#2}
}

\newcommand{\bashinputlst}[2][]{
  \inputlst[#1]{language=bash,numbers=none}{#2}
}

% Code listing definitions using tcblisting
\newtcblisting[]{sidelst}{%
  colback=bgcolor,
  colframe=\framecolor,
  bicolor,colbacklower=white,
  listing side text,
  listing options={
    breaklines,
    basicstyle=\small\ttfamily,
    },
  compilable listing,
}

\newtcblisting[]{vertlst}{%
  colback=bgcolor,
  colframe=\framecolor,
  bicolor,colbacklower=white,
  listing options={
    breaklines,
    basicstyle=\small\ttfamily,
    },
  compilable listing,
}

\lstnewenvironment{texlst}[1][]{
  \lstset{
    language=tex,
    numbers=left,
    numberstyle=\scriptsize,
    frame=TB,
    xleftmargin=1.5cm,
    xrightmargin=1.5cm,
    rulesep=.7pt,
    rulesepcolor=\color{\framecolor},
    backgroundcolor=\color{bgcolor},
    breaklines,
    breakautoindent=true,
    basicstyle=\small\ttfamily,
    commentstyle=\small,
    #1,
  }
}{}

\lstnewenvironment{bashlst}{
  \lstset{
    language=bash,
    numbers=none,
    numberstyle=\scriptsize,
    frame=TB,
    rulesep=.7pt,
    rulesepcolor=\color{\framecolor},
    backgroundcolor=\color{bgcolor},
    breaklines,
    breakautoindent=true,
    basicstyle=\small\ttfamily,
    commentstyle=\small,
  }
}{}

% Color definitions
\definecolor{bgcolor}{rgb}{.9,1,.9}
\newcommand{\framecolor}{green!35!black}
\newcommand{\titlecolor}{red!25!yellow}

% Exercise definition
\newtcbtheorem[list inside=exercise,]{Ex}{Exercise}{
  colback=bgcolor,
  colframe=\framecolor,
  fonttitle=\bfseries,
  separator sign={\ $\blacktriangleright$},
  description color=\titlecolor,
}{ex}

% Bullet board definition
\newtcolorbox{mybox}[2][]{colback=red!5!white,
colframe=red!75!black,fonttitle=\bfseries,
colbacktitle=red!85!black,enhanced,
attach boxed title to top center={yshift=-2mm},
title=#2,#1}